"use strict";var _turnOnIndicators=!1,autoVideoMagicScene,viewZoomPinAnimationScrollMagicScene,viewZoomClassAnimationScrollMagicScene,lightAnimationScrollMagicScene,lightAnimationScrollMagicSceneMobile,controller=new ScrollMagic.Controller({loglevel:0,addIndicators:_turnOnIndicators}),enterController=new ScrollMagic.Controller({addIndicators:_turnOnIndicators,globalSceneOptions:{triggerHook:"onEnter"}}),leaveController=new ScrollMagic.Controller({addIndicators:_turnOnIndicators,globalSceneOptions:{triggerHook:"onLeave"}}),centerController=new ScrollMagic.Controller({addIndicators:_turnOnIndicators,globalSceneOptions:{}}),commonSetting=function(){var e={mobileMaxReserlution:function(){return 767.98},tabletMaxReserlution:function(){return 991.98},isRtl:function(){return!!$("body").hasClass("rtl")},isMobile:function(){return $(window).width()<=e.mobileMaxReserlution()},isTablet:function(){return $(window).width()<=e.tabletMaxReserlution()&&$(window).width()>e.mobileMaxReserlution()},isDesktop:function(){return $(window).width()>e.tabletMaxReserlution()},updateScrollPosition:function(t,o){var i=e.getScrollDurationPosition(t),n=i[0];i[1];o.offset(n)},updateScrollDurationPosition:function(t,o){var i=e.getScrollDurationPosition(t),n=i[0],a=i[1];o.offset(n),o.duration(a)},updateMobileScrollDurationPosition:function(t,o){var i=e.getMobileScrollDurationPosition(t),n=i[0],a=i[1];o.offset(n),o.duration(a)},getScrollDurationPosition:function(e){var t=0,o=0,i=5,n=5,a=e.outerHeight();return void 0!==e.data("top-trigger-percentage")&&(i=e.data("top-trigger-percentage"),t=parseInt(a*(i/100),10)),void 0!==e.data("bottom-trigger-percentage")&&(n=e.data("bottom-trigger-percentage"),o=a-parseInt(a*(n/100),10)-t),[t,o]},getMobileScrollDurationPosition:function(e){var t=0,o=0,i=5,n=5,a=e.outerHeight();return void 0!==e.data("m-top-trigger-percentage")&&(i=e.data("m-top-trigger-percentage"),t=parseInt(a*(i/100),10)),void 0!==e.data("m-bottom-trigger-percentage")&&(n=e.data("m-bottom-trigger-percentage"),o=a-parseInt(a*(n/100),10)-t),[t,o]}};return e}(),infoBar=function(){var e={init:function(){$(".info-bar").length>0&&(e.setupSticky(),e.switchItemSelected(),e.switchSpecSelected(),e.setupToggleMenu(),setTimeout(function(){e.setupScrollToTab()},100))},switchSpecSelected:function(){setTimeout(function(){new ScrollMagic.Scene({triggerElement:".section-spec-wrapper",duration:$(".section-spec-wrapper").height()-1}).setClassToggle(".scroll-btn_spec","selected").addTo(centerController)},1e3)},switchItemSelected:function(){setTimeout(function(){$(".scroll-btn").each(function(e,t){var o=$(this).data("scroll-to");new ScrollMagic.Scene({triggerElement:".tab-group_"+o,duration:$(".tab-group_"+o).height()-1}).setClassToggle(".scroll-btn_"+o,"selected").addTo(centerController)})},1e3)},setupSticky:function(){var e=(new ScrollMagic.Scene({triggerElement:".info-bar",triggerHook:"onLeave"}).setPin(".info-bar",{pushFollowers:!0,spacerClass:"custome-id-pin-info-bar"}).addTo(controller),$(".info-bar")),t=$(window);$("body").hasClass("rtl")?t.scroll(function(o){"fixed"===e.css("position")?e.css({left:"auto",right:t.scrollLeft()+"px"}):e.css({left:"auto",right:"0px"})}):t.scroll(function(o){"fixed"===e.css("position")?e.css({left:-t.scrollLeft()+"px"}):e.css({left:"0px"})})},setupScrollToTab:function(){$(".scroll-btn").on("click",function(t){if(t.preventDefault(),!$(this).hasClass("selected")){var o=$(this).data("scroll-to"),i=0;$(this).hasClass("trigger-animation");void 0!==o&&($(".scroll-btn").removeClass("selected"),i=$("#"+o).offset().top-$(".info-bar").height(),$(".tab-group").css("visibility","hidden"),$("html, body").animate({scrollTop:i},500,function(){$(".tab-group").css("visibility","visible")}),$(".info-bar").find(".m-toggle-menu").text($(this).text()),$(this).addClass("selected"),e.toggleMenu())}})},setupToggleMenu:function(){$(".m-toggle-menu").on("click",function(t){t.preventDefault(),e.toggleMenu()})},toggleMenu:function(){$(".m-toggle-menu").toggleClass("active"),$(".scroll-btn-group").toggleClass("show")}};return e}(),modalVideo=function(){var e={init:function(){var t=$(".section__watch-video .modal-video");t.length>0&&$.each(t,function(t,o){var i=($(this),$(this).find(".play-modal-video-btn")),n=i.data("vtype"),a=i.data("vid");i.on("click",function(t){t.preventDefault(),"youtube"===n?youtubeVideo.init(a):(youkuVideo.init(a),e.showModal(),e.setupCloseModalBtn())})})},setupCloseModalBtn:function(){$(".modal-overlap-container .btn-close").off("click").on("click",function(t){t.preventDefault(),e.hideModal()})},showModal:function(){$(".modal-overlap-container").addClass("show"),$("html, body").addClass("fixed")},hideModal:function(){$(".modal-overlap-container").removeClass("show"),$("html, body").removeClass("fixed"),$(".modal-overlap-container .align-center").html('<div id="player"></div>')}};return e}(),videoScrollAndPlay=function(){var e={setupVideoSource:function(t){var o=t,i=o[0];$.each(o.find("video"),function(t,n){var a=$(this),r=a[0],l=a.data("poster-path"),s=a.data("video-path"),c=a.data("force-preload");if(commonSetting.isMobile()&&(l=a.data("m-poster-path")),a.attr("poster",l),void 0!==c&&"yes"===c)r.pause(),r.src=s,r.load(),a.addClass("loaded");else{new ScrollMagic.Scene({triggerElement:i,offset:-700}).addTo(controller).on("enter",function(e){"enter"!==e.type||a.hasClass("loaded")||(r.pause(),r.src=s,r.load(),a.addClass("loaded"))})}r.addEventListener("loadeddata",function(){e.setupScrollAndPlay(o,i,a,r)},!1)})},getPosition:function(e,t){var o=0,i=0,n=void 0,a=void 0,r=e.outerHeight();return commonSetting.isMobile()?(n=-15,a=-15,void 0!==t.data("md-top-trigger-playing")&&(n=t.data("md-top-trigger-playing")),o=parseInt(r*(n/100),10),void 0!==t.data("md-bottom-trigger-playing")&&(a=t.data("md-bottom-trigger-playing")),i=r-parseInt(r*(a/100),10)-o):(n=5,a=5,void 0!==t.data("top-trigger-playing")&&(n=t.data("top-trigger-playing")),o=parseInt(r*(n/100),10),void 0!==t.data("bottom-trigger-playing")&&(a=t.data("bottom-trigger-playing")),i=r-parseInt(r*(a/100),10)-o),[o,i]},updatePosition:function(t,o,i){var n=e.getPosition(t,o),a=n[0],r=n[1];i.offset(a),i.duration(r)},setupScrollAndPlay:function(t,o,i,n){var a=void 0,r=i.data("loop"),l=i.data("play-once"),s=e.getPosition(t,i),c=s[0],d=s[1];i.outerHeight(),t.outerHeight();a=new ScrollMagic.Scene({triggerElement:o,offset:c,duration:d}).addTo(controller).on("enter leave",function(e){switch(e.type){case"enter":if(i.hasClass("loaded")&&!i.hasClass("playing")){var t=n.play();void 0!==t&&t.catch(function(e){}).then(function(){i.addClass("playing")})}break;case"leave":void 0!==l&&"yes"===l||void 0!==r&&"no"===r||(n.pause(),i.removeClass("playing"))}}),n.addEventListener("ended",function(){void 0!==l&&"yes"===l?i.addClass("playing"):"undefined"!=typeof loop&&"no"===loop?i.removeClass("playing"):i.hasClass("playing")&&(i.attr("loop","loop"),n.play())},!1),$(window).resize(function(o){e.updatePosition(t,i,a)})}};return e}(),mouseScrollAndPlay=function(){var e={setupVideoSource:function(t){var o=t,i=o[0];$.each(o.find("video"),function(t,n){var a=$(this),r=a[0],l=a.data("poster-path"),s=a.data("video-path"),c=a.data("force-preload");if(a.attr("poster",l),void 0!==c&&"yes"===c)r.pause(),r.src=s,r.load(),a.addClass("loaded");else{new ScrollMagic.Scene({triggerElement:i,offset:-700}).addTo(controller).on("enter",function(e){"enter"!==e.type||a.hasClass("loaded")||(r.pause(),r.src=s,r.load(),a.addClass("loaded"))})}r.addEventListener("loadeddata",function(){e.setupScrollAndPlay(o,i,a,r)},!1)})},getPosition:function(e,t){var o=0,i=0,n=void 0,a=void 0,r=e.outerHeight();return commonSetting.isMobile()?(n=-15,a=-15,void 0!==t.data("md-top-trigger-playing")&&(n=t.data("md-top-trigger-playing")),o=parseInt(r*(n/100),10),void 0!==t.data("md-bottom-trigger-playing")&&(a=t.data("md-bottom-trigger-playing")),i=r-parseInt(r*(a/100),10)-o):(n=12,a=42,o=parseInt(r*(n/100),10),i=r-parseInt(r*(a/100),10)-o),[o,i]},updatePosition:function(t,o,i){var n=e.getPosition(t,o),a=n[0],r=n[1];i.offset(a),i.duration(r)},setupScrollAndPlay:function(t,o,i,n){var a=void 0,r=0,l=0,s=(i.data("loop"),i.data("play-once")),c=e.getPosition(t,i),d=c[0],u=c[1];i.outerHeight(),t.outerHeight();a=new ScrollMagic.Scene({triggerElement:o,offset:d,duration:u}).addTo(controller).on("enter leave progress",function(e){switch(e.type){case"progress":r=e.progress}}),setInterval(function(){l!==r&&requestAnimationFrame(function(){n.currentTime=n.duration*r,n.pause(),l=r})},30),n.addEventListener("ended",function(){void 0!==s&&"yes"===s?i.addClass("playing"):"undefined"!=typeof loop&&"no"===loop?i.removeClass("playing"):i.hasClass("playing")&&(i.attr("loop","loop"),n.play())},!1),$(window).resize(function(o){e.updatePosition(t,i,a)})}};return e}(),singleVideo=function(){return{init:function(){var e=$(".single__video-scroll-and-play");e.length>0&&$.each(e,function(e,t){var o=$(this),i=o.find(".video-block");videoScrollAndPlay.setupVideoSource(i)})}}}(),viewZoomAnimation=function(){var e={init:function(){var t=$(".section__view-zoom-animation");t.length>0&&$.each(t,function(t,o){var i=$(this);e.setupAnimation(i),$(window).resize(function(){e.setupAnimation(i)})})},setupAnimation:function(e){commonSetting.isMobile()?e.hasClass("animation-set-pin")&&void 0!==viewZoomPinAnimationScrollMagicScene&&(viewZoomPinAnimationScrollMagicScene.destroy(!0),e.removeClass("animation-set-pin")):e.hasClass("animation-set-pin")||(viewZoomPinAnimationScrollMagicScene=new ScrollMagic.Scene({triggerElement:e[0],offset:0,duration:"70%"}).setPin(e[0],{pushFollowers:!0}).addTo(leaveController),e.addClass("animation-set-pin"));var t=commonSetting.isMobile()?.4*e.outerHeight():.8*e.outerHeight();e.hasClass("animation-set-class")?viewZoomClassAnimationScrollMagicScene.offset(t):(viewZoomClassAnimationScrollMagicScene=new ScrollMagic.Scene({triggerElement:e[0],offset:t,duration:"200%"}).setClassToggle(e[0],"active").addTo(centerController),e.addClass("animation-set-class"))}};return e}(),lightAnimation=function(){var e={init:function(){var t=$(".section__light-animation");t.length>0&&$.each(t,function(t,o){var i=$(this);e.setupAnimation(i),$(window).resize(function(){e.setupAnimation(i)})})},setupAnimation:function(e){if(!e.hasClass("animation-set")){var t=e.innerHeight()/2;lightAnimationScrollMagicScene=new ScrollMagic.Scene({triggerElement:e[0],offset:t}).on("enter",function(t){e.addClass("active")}).on("leave",function(t){e.removeClass("active")}).addTo(centerController),e.addClass("animation-set")}}};return e}(),autoPlayVideo=function(){var e={init:function(){function t(e,t,o){e+2>=t?o.siblings(".caption-block").addClass("active"):o.siblings(".caption-block").removeClass("active")}$(".section__auto-video video").on("timeupdate",function(e){t(this.currentTime,this.duration,$(this))});var o=$(".section__auto-video");o.length>0&&$.each(o,function(t,o){var i=$(this);e.setupAnimation(i),$(window).resize(function(){e.setupAnimation(i)})})},setupAnimation:function(e){e.hasClass("animation-set")||(autoVideoMagicScene=new ScrollMagic.Scene({triggerElement:e[0],offset:0,duration:"50%"}).on("enter leave",function(t){"enter"===t.type?e.find("video")[0].play():e.find("video")[0].pause()}).addTo(centerController),e.addClass("animation-set"))}};return e}(),lazyLoadImg=function(){return{init:function(){if("undefined"!=typeof LazyLoad){new LazyLoad({elements_selector:".lazy-img"})}}}}(),resizeViewSection=function(){return{init:function(){var e=$(window).innerWidth();if(e>=768){var t=$(".custom-id-view").innerHeight(),o=parseFloat($(".custom-id-view .caption-block").css("padding-top")),i=$(".custom-id-view .caption-block").innerHeight()-o,n=e>=1200?1e3:e*(5/6),a=e>=1200?560:e*(7/15),r=i+a+60,l=t>r+200,s=l?(t-r)/2:100;a=l?a:t-(i+2*s+60);var c=l?r:i+a+60;$(".custom-id-view .caption-block").css({"padding-top":s}),$(".custom-id-view .bg-block").css({clip:"rect("+(s+i+60)+"px,"+(e/2+n/2)+"px,"+(s+c)+"px,"+(e/2-n/2)+"px)"})}else{var d=.15*e,u=.85*e,g=e/3*2*.15,p=e/3*2*.85;$(".custom-id-view .bg-block").css({clip:"rect("+g+"px,"+u+"px,"+p+"px,"+d+"px)"})}}}}();$(window).resize(function(){resizeViewSection.init()}),$(document).ready(function(){lazyLoadImg.init()}),$(window).load(function(){$(".signup-popup-container").length>0&&($(".signup-popup-container").remove(),$("body").removeClass("fixed")),infoBar.init(),modalVideo.init(),singleVideo.init(),autoPlayVideo.init(),resizeViewSection.init(),viewZoomAnimation.init(),lightAnimation.init()});var youkuVideo=function(){return{init:function(e){new YKU.Player("player",{styleid:"0",client_id:"2a8fda48fc709b73",vid:e,newPlayer:!1,autoplay:!0,show_related:!1,events:{onPlayEnd:function(){modalVideo.hideModal()},onPlayStart:function(){modalVideo.showModal(),modalVideo.setupCloseModalBtn()}}})},resetPlayerHeight:function(){"youku"===$(".player-container").data("vtype")&&$("#player").height($("picture").height())}}}(),youtubeVideo=function(){return{init:function(e){function t(e){e.target.playVideo(),modalVideo.showModal(),modalVideo.setupCloseModalBtn()}function o(e){0===e.data&&modalVideo.hideModal()}var i=void 0;!function(){i=new YT.Player("player",{height:"390",width:"640",videoId:e,events:{onReady:t,onStateChange:o}})}()}}}();!function(e){e.fn.videobject=function(t){var o=e.extend({flash:'<iframe width="mywidth" height="myheight" src="myurl" frameborder="0" allowfullscreen></iframe>',id:"XMTcwMDMxNTA4",url:"youtube",width:"500",height:"282",warning:"You need Flash Player enabled."},t||{}),i=function(){var e=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&(e=!0)}return e};return this.empty().html(function(t){var n=!0,a=void 0,r="http"+(/^https/.test(location.protocol)?"s":"")+"://www.youtube.com/embed/myid?autoplay=1&wmode=opaque";return e("html").hasClass("desktop")?(n=i(),a="http://static.youku.com/v/swf/qplayer.swf?VideoIDS=myid=&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0"):a="http://static.youku.com/v1.0.0149/v/swf/loader.swf?VideoIDS=myid&quality=high&isAutoPlay=true&winType=adshow",n?(11===t.length?o.id=r.replace(/myid/,t):(o.id=a.replace(/myid/,t),o.flash="<embed src='myurl' allowFullScreen='true' quality='high' width='mywidth' height='myheight' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed>"),o.flash.replace(/myurl/,o.id).replace(/mywidth/,o.width).replace(/myheight/,o.height)):o.warning}(o.id))}}(jQuery);