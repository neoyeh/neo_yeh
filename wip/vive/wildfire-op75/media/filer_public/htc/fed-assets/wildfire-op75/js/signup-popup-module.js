"use strict";var bannerSignupBtn=function(){return{setupClick:function(){var n=$(".signup-popup-btn-for-htc-u12-plus");n.length>0&&(signupPopOverModule.cloneContainerToBody(),n.off("click").on("click",function(n){n.preventDefault(),signupPopOverModule.init()}),n.parent().css("opacity","1"))}}}(),signupPopOverModule=function(){var n={isCalling:!1,formBlcokName:"form-block",thankyouBlcokName:"thank-you-block",cookieName:"htc-has-read-signup-popup",containerClassName:"signup-popup-container-for-htc-u12-plus"},t=void 0,e={cloneContainerToBody:function(){var t=$(".htc-main ."+n.containerClassName);0==$("body > ."+n.containerClassName).length&&(t.eq(0).clone().appendTo("body"),t.remove(),$("body").css("font-family",$(".htc-chrome").css("font-family")))},init:function(){void 0!==(t=$("body > ."+n.containerClassName))&&(e.setupValidate(),e.setupOwnHtcBtn(),e.setupSubmitBtn(),e.setupEnterKey(),e.setupCloseBtn(),e.showModal())},addCookie:function(){$.cookie(n.cookieName,!0,{expires:30,path:"/"})},setupValidate:function(){$.validator.addMethod("ownhtc",function(n,e){return t.find(".btnYN").hasClass("active")}),t.find(".form-signup").validate({errorPlacement:function(n,t){"checkbox-email-me"==t.attr("name")?n.insertAfter(t.parent()):n.insertAfter(t)}})},setupCloseBtn:function(){t.find(".btn-close").off("click").on("click",function(){e.hideModal()})},setupOwnHtcBtn:function(){t.find(".btnYN").off("click").on("click",function(){$(".btnYN").removeClass("active"),$(this).addClass("active"),$(".form-signup").valid()})},getLocaleInfo:function(){var n=(window.location.pathname.split("/"),$("body").data("site")),t=n,e="en",o=window.navigator.language,i={};if(void 0!==o&&null!==o){e=o.split("_")[0]}return void 0!==e&&""!==e||(e="en"),i.languages=e,i.countrySite=t,i},setupSubmitBtn:function(){t.find(".form-signup .submit").off("click").on("click",function(n){n.preventDefault(),e.sendToApi()})},setupEnterKey:function(){t.find(".form-signup").keydown(function(n){if(13==n.which)return e.sendToApi(),!1})},sendToApi:function(){if(!1===t.find(".form-signup").valid())return!1;if(!n.isCalling){var o=function(n){return n<10?"0"+n:n},i=void 0,a=e.getLocaleInfo(),s=t.find("input[name=yes]").hasClass("active")?"customer":"prospect",c=new Date,u=c.getUTCFullYear()+"-"+o(c.getUTCMonth()+1)+"-"+o(c.getUTCDate())+"T"+o(c.getUTCHours())+":"+o(c.getUTCMinutes())+":"+o(c.getUTCSeconds())+"-00:00",l={app_id:"htc-u12-plus-newsletter",email:t.find(".mail").val(),lang:a.languages,zip:"",country:a.countrySite,ip:"0.0.0.0",date:u,s_type:s,s_agreement:"true",s_welcome:"true",s_newsletter:"true",s_product:"true",r_url:location.href,r_campaign:"newsletter",r_cta:"signup-popup-banner",r_pid:"htc-u12-plus",r_pname:"HTC U12+",ws_echo:"false"};i="www.htc.com"===location.hostname?"https://aws.htc.com/htc-subscription-1.6/profile":"https://adev-ws.htc.com/htc-subscription-1.6/profile",$.ajax({url:i,type:"GET",dataType:"json",data:l,jsonp:!0,async:!0,beforeSend:function(t){n.isCalling=!0}}).done(function(){}).fail(function(){}).always(function(){e.showThankyou(),n.isCalling=!1})}},showModal:function(){t.addClass("show"),$("body").addClass("fixed")},hideModal:function(){t.removeClass("show"),$("body").removeClass("fixed")},showThankyou:function(){var t=$("body > ."+n.containerClassName);t.find("."+n.thankyouBlcokName).addClass("show"),t.find("."+n.formBlcokName).addClass("hide")}};return e}();$(document).ready(function(){$(".signup-popup-container-for-htc-u12-plus").length>0&&setTimeout(function(){bannerSignupBtn.setupClick()},100)});